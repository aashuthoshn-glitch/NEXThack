/*! For license information please see dashboardtalk-dashboard.js.LICENSE.txt */
(()=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}function e(){var n,o,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(e,r,a,i){var s=r&&r.prototype instanceof l?r:l,d=Object.create(s.prototype);return t(d,"_invoke",function(e,t,r){var a,i,s,l=0,d=r||[],u=!1,p={p:0,n:0,v:n,a:g,f:g.bind(n,4),d:function(e,t){return a=e,i=0,s=n,p.n=t,c}};function g(e,t){for(i=e,s=t,o=0;!u&&l&&!r&&o<d.length;o++){var r,a=d[o],g=p.p,f=a[2];e>3?(r=f===t)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=g&&((r=e<2&&g<a[1])?(i=0,p.v=t,p.n=a[1]):g<f&&(r=e<3||a[0]>t||t>f)&&(a[4]=e,a[5]=t,p.n=f,i=0))}if(r||e>1)return c;throw u=!0,t}return function(r,d,f){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&g(d,f),i=d,s=f;(o=i<2?n:s)||!u;){a||(i?i<3?(i>1&&(p.n=-1),g(i,s)):p.n=s:p.v=s);try{if(l=2,a){if(i||(r="next"),o=a[r]){if(!(o=o.call(a,s)))throw TypeError("iterator result is not an object");if(!o.done)return o;s=o.value,i<2&&(i=0)}else 1===i&&(o=a.return)&&o.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=n}else if((o=(u=p.n<0)?s:e.call(t,p))!==c)break}catch(e){a=n,i=1,s=e}finally{l=1}}return{value:o,done:u}}}(e,a,i),!0),d}var c={};function l(){}function d(){}function u(){}o=Object.getPrototypeOf;var p=[][a]?o(o([][a]())):(t(o={},a,function(){return this}),o),g=u.prototype=l.prototype=Object.create(p);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,u):(n.__proto__=u,t(n,i,"GeneratorFunction")),n.prototype=Object.create(g),n}return d.prototype=u,t(g,"constructor",u),t(u,"constructor",d),d.displayName="GeneratorFunction",t(u,i,"GeneratorFunction"),t(g),t(g,i,"Generator"),t(g,a,function(){return this}),t(g,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:f}})()}function t(n,e,o,r){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}t=function(n,e,o,r){function i(e,o){t(n,e,function(n){return this._invoke(e,o,n)})}e?a?a(n,e,{value:o,enumerable:!r,configurable:!r,writable:!r}):n[e]=o:(i("next",0),i("throw",1),i("return",2))},t(n,e,o,r)}function o(n,e,t,o,r,a,i){try{var s=n[a](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(o,r)}function r(n){return function(){var e=this,t=arguments;return new Promise(function(r,a){var i=n.apply(e,t);function s(n){o(i,r,a,s,c,"next",n)}function c(n){o(i,r,a,s,c,"throw",n)}s(void 0)})}}function a(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,i(o.key),o)}}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}var s,c=function(){return n=function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.containerId=e,this.messages=[],this.loading=!1,this.error=null,this.refreshInterval=null},t=[{key:"init",value:(s=r(e().m(function n(){var t=this;return e().w(function(n){for(;;)switch(n.n){case 0:return this.render(),n.n=1,this.loadMessages();case 1:this.refreshInterval=setInterval(function(){t.loadMessages()},3e4);case 2:return n.a(2)}},n,this)})),function(){return s.apply(this,arguments)})},{key:"render",value:function(){var n=document.getElementById(this.containerId);n?(n.innerHTML='\n      <div class="talk-widget">\n        <div class="talk-widget__header">\n          <h3 class="talk-widget__title">\n            <span class="icon icon-talk"></span>\n            Talk Messages\n          </h3>\n          <button class="talk-widget__refresh" onclick="talkWidget.refreshMessages()" title="Refresh messages">\n            <span class="icon icon-refresh"></span>\n          </button>\n        </div>\n\n        <div class="talk-widget__content" id="talk-widget-content">\n          <div class="talk-widget__loading">\n            <span class="icon icon-loading"></span>\n            Loading messages...\n          </div>\n        </div>\n\n        <div class="talk-widget__footer">\n          <button class="talk-widget__compose" onclick="talkWidget.openTalkApp()" title="Open Talk app">\n            <span class="icon icon-add"></span>\n            New Message\n          </button>\n        </div>\n      </div>\n    ',this.addStyles()):console.error("Container not found:",this.containerId)}},{key:"addStyles",value:function(){if(!document.getElementById("talk-widget-styles")){var n=document.createElement("style");n.id="talk-widget-styles",n.textContent='\n      .talk-widget {\n        background: var(--color-background-plain, #ffffff);\n        border-radius: var(--border-radius, 8px);\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        overflow: hidden;\n        font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n      }\n\n      .talk-widget__header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 12px 16px;\n        background: var(--color-background-hover, #f5f5f5);\n        border-bottom: 1px solid var(--color-border, #e0e0e0);\n      }\n\n      .talk-widget__title {\n        margin: 0;\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--color-text, #333);\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .talk-widget__refresh {\n        background: none;\n        border: none;\n        padding: 4px;\n        cursor: pointer;\n        border-radius: var(--border-radius, 8px);\n        color: var(--color-text-lighter, #666);\n        transition: all 0.2s ease;\n      }\n\n      .talk-widget__refresh:hover {\n        background: var(--color-background-hover, #f0f0f0);\n        color: var(--color-text, #333);\n      }\n\n      .talk-widget__content {\n        max-height: 400px;\n        overflow-y: auto;\n        padding: 8px;\n      }\n\n      .talk-widget__loading,\n      .talk-widget__error,\n      .talk-widget__empty {\n        padding: 20px;\n        text-align: center;\n        color: var(--color-text-lighter, #666);\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .talk-widget__error {\n        color: var(--color-error, #e74c3c);\n      }\n\n      .talk-widget__retry {\n        background: var(--color-primary, #0082c9);\n        color: white;\n        border: none;\n        padding: 6px 12px;\n        border-radius: var(--border-radius, 8px);\n        cursor: pointer;\n        font-size: 12px;\n      }\n\n      .talk-widget__retry:hover {\n        background: var(--color-primary-hover, #006ba3);\n      }\n\n      .talk-widget__message {\n        padding: 12px;\n        border-radius: var(--border-radius, 8px);\n        margin-bottom: 8px;\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n        border: 1px solid transparent;\n      }\n\n      .talk-widget__message:hover {\n        background: var(--color-background-hover, #f5f5f5);\n        border-color: var(--color-border, #e0e0e0);\n      }\n\n      .talk-widget__message-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 4px;\n      }\n\n      .talk-widget__conversation-name {\n        font-weight: 600;\n        color: var(--color-primary, #0082c9);\n        font-size: 12px;\n      }\n\n      .talk-widget__message-time {\n        font-size: 11px;\n        color: var(--color-text-lighter, #666);\n      }\n\n      .talk-widget__message-content {\n        font-size: 13px;\n        line-height: 1.4;\n        color: var(--color-text, #333);\n        word-wrap: break-word;\n      }\n\n      .talk-widget__footer {\n        padding: 12px 16px;\n        background: var(--color-background-hover, #f5f5f5);\n        border-top: 1px solid var(--color-border, #e0e0e0);\n      }\n\n      .talk-widget__compose {\n        width: 100%;\n        background: var(--color-primary, #0082c9);\n        color: white;\n        border: none;\n        padding: 8px 12px;\n        border-radius: var(--border-radius, 8px);\n        cursor: pointer;\n        font-size: 13px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 6px;\n        transition: background-color 0.2s ease;\n      }\n\n      .talk-widget__compose:hover {\n        background: var(--color-primary-hover, #006ba3);\n      }\n\n      .icon {\n        display: inline-block;\n        width: 16px;\n        height: 16px;\n        background-size: contain;\n        background-repeat: no-repeat;\n        background-position: center;\n      }\n\n      .icon-talk::before { content: "üí¨"; }\n      .icon-refresh::before { content: "üîÑ"; }\n      .icon-loading::before { content: "‚è≥"; }\n      .icon-error::before { content: "‚ùå"; }\n      .icon-add::before { content: "‚ûï"; }\n    ',document.head.appendChild(n)}}},{key:"loadMessages",value:(i=r(e().m(function n(){var t;return e().w(function(n){for(;;)switch(n.p=n.n){case 0:return this.loading=!0,this.error=null,n.p=1,n.n=2,new Promise(function(n){return setTimeout(n,1e3)});case 2:this.messages=[{id:1,message:"Hello! How are you doing today?",actorDisplayName:"John Doe",timestamp:Math.floor(Date.now()/1e3)-300,conversation:{token:"room1",displayName:"General Chat",type:"group"}},{id:2,message:"The project is going well, thanks for asking!",actorDisplayName:"Jane Smith",timestamp:Math.floor(Date.now()/1e3)-600,conversation:{token:"room2",displayName:"Project Team",type:"group"}},{id:3,message:"Don't forget about the meeting tomorrow at 2 PM",actorDisplayName:"Mike Johnson",timestamp:Math.floor(Date.now()/1e3)-900,conversation:{token:"room3",displayName:"Team Updates",type:"group"}}],this.updateContent(),n.n=4;break;case 3:n.p=3,t=n.v,console.error("Error loading messages:",t),this.error="Failed to load messages",this.updateContent();case 4:return n.p=4,this.loading=!1,n.f(4);case 5:return n.a(2)}},n,this,[[1,3,4,5]])})),function(){return i.apply(this,arguments)})},{key:"updateContent",value:function(){var n=this,e=document.getElementById("talk-widget-content");if(e)if(this.loading&&0===this.messages.length)e.innerHTML='\n        <div class="talk-widget__loading">\n          <span class="icon icon-loading"></span>\n          Loading messages...\n        </div>\n      ';else if(this.error)e.innerHTML='\n        <div class="talk-widget__error">\n          <span class="icon icon-error"></span>\n          '.concat(this.error,'\n          <button class="talk-widget__retry" onclick="talkWidget.refreshMessages()">Retry</button>\n        </div>\n      ');else if(0===this.messages.length)e.innerHTML='\n        <div class="talk-widget__empty">\n          <span class="icon icon-talk"></span>\n          No messages found\n        </div>\n      ';else{var t=this.messages.map(function(e){return'\n        <div class="talk-widget__message" onclick="talkWidget.openConversation(\''.concat(e.conversation.token,'\')">\n          <div class="talk-widget__message-header">\n            <span class="talk-widget__conversation-name">\n              ').concat(e.conversation.displayName,'\n            </span>\n            <span class="talk-widget__message-time">\n              ').concat(n.formatTime(e.timestamp),'\n            </span>\n          </div>\n          <div class="talk-widget__message-content">\n            <strong>').concat(e.actorDisplayName,":</strong>\n            ").concat(e.message,"\n          </div>\n        </div>\n      ")}).join("");e.innerHTML='<div class="talk-widget__messages">'.concat(t,"</div>")}}},{key:"refreshMessages",value:(o=r(e().m(function n(){return e().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.loadMessages();case 1:return n.a(2)}},n,this)})),function(){return o.apply(this,arguments)})},{key:"formatTime",value:function(n){var e=new Date(1e3*n),t=new Date-e;return t<6e4?"Just now":t<36e5?Math.floor(t/6e4)+"m ago":t<864e5?Math.floor(t/36e5)+"h ago":e.toLocaleDateString()}},{key:"openConversation",value:function(n){window.open("/apps/spreed/#/call/".concat(n),"_blank")}},{key:"openTalkApp",value:function(){window.open("/apps/spreed/","_blank")}},{key:"destroy",value:function(){this.refreshInterval&&clearInterval(this.refreshInterval)}}],t&&a(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,t,o,i,s}();document.addEventListener("DOMContentLoaded",function(){document.getElementById("dashboard-talk-widget")&&((s=new c("dashboard-talk-widget")).init(),window.talkWidget=s)}),window.TalkWidget=c})();
//# sourceMappingURL=dashboardtalk-dashboard.js.map